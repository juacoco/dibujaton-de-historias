<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sketch Duel</title>
  <meta name="description" content="Juego de dibujo estático con 3 rondas y final con 3 dibujos." />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="app">
    <header class="topbar">
      <div class="brand">
        <span class="logo">✏️</span>
        <span id="gameTitle">Sketch Duel</span>
      </div>
      <div class="topRight">
        <div class="pill" id="statusPill">Menú</div>
        <button id="btnHome" class="ghost" type="button">Inicio</button>
      </div>
    </header>

    <!-- MENÚ -->
    <section id="screenMenu" class="screen show">
      <div class="grid2">
        <div>
          <h1 id="menuTitle">Sketch Duel</h1>
          <p class="muted" id="menuDesc">3 rondas de dibujo y un final con tus 3 escenas.</p>

          <div class="card">
            <h2>Tu nombre (opcional)</h2>
            <div class="row">
              <input id="nameInput" class="input" maxlength="18" placeholder="Tu nombre" />
              <button id="btnSaveName" class="ghost" type="button">Guardar</button>
            </div>
            <p class="tiny muted">Si lo dejas vacío, se asigna uno automáticamente.</p>
          </div>

          <div class="card">
            <h2>Acceso (opcional)</h2>
            <p class="muted tiny">Si se activó un código, escríbelo aquí para iniciar.</p>
            <div class="row">
              <input id="codeInput" class="input" maxlength="24" placeholder="Código (si está activado)" />
              <button id="btnStart" class="primary" type="button">Jugar</button>
            </div>
            <p class="tiny muted">El código se configura en <code>app.js</code> (CONFIG.accessCode).</p>
          </div>

          <div class="card">
            <h2>Cómo se juega</h2>
            <ol>
              <li>En cada ronda dibuja lo que indique el prompt.</li>
              <li>Hay temporizador. Cuando termine, se avanza.</li>
              <li>También puedes tocar <b>Listo</b> antes.</li>
            </ol>
            <p class="tiny muted">Si no suena audio, toca un botón una vez (restricción del navegador).</p>
          </div>
        </div>

        <div>
          <div class="card playersCard">
            <div class="playersHeader">
              <h2>Partida</h2>
              <span class="tiny muted" id="infoHint">3 rondas</span>
            </div>

            <div class="playersList">
              <div class="player">
                <div class="badge">
                  <span class="avatar" id="avatar">?</span>
                  <span id="playerName">Jugador</span>
                </div>
                <span class="status online">listo</span>
              </div>
            </div>

            <div class="divider"></div>
            <div class="row between tiny muted"><span>Rondas</span><span id="roundsHint">3</span></div>
            <div class="row between tiny muted"><span>Tiempo</span><span id="timeHint">45s</span></div>
          </div>

          <div class="card">
            <h2>Personalización rápida</h2>
            <ul class="muted">
              <li><b>Prompts</b> y tiempo: <code>app.js</code> → <code>CONFIG.rounds</code></li>
              <li><b>Frase final</b>: <code>CONFIG.finalText</code></li>
              <li><b>Código</b>: <code>CONFIG.accessCode</code></li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- JUEGO -->
    <section id="screenPlay" class="screen">
      <div class="hud">
        <div class="hudLeft">
          <div class="pill" id="roundPill">Ronda 1/3</div>
          <div class="timer" title="Tiempo restante">
            <span class="timerLabel">⏱</span>
            <span id="timerText">45</span><span class="tiny muted">s</span>
          </div>
        </div>

        <div class="hudCenter">
          <div class="prompt" id="promptText">Dibuja…</div>
          <div class="submuted tiny" id="subPrompt">Puedes presionar Listo antes de que acabe.</div>
        </div>

        <div class="hudRight">
          <label class="tool">
            Grosor
            <input id="brushSize" type="range" min="2" max="18" value="6" />
          </label>
          <button id="btnClear" class="ghost" type="button">Borrar</button>
          <button id="btnDone" class="primary" type="button">Listo</button>
        </div>
      </div>

      <div class="canvasWrap">
        <canvas id="canvas" width="900" height="540" aria-label="Lienzo de dibujo"></canvas>
      </div>

      <div class="miniBar">
        <div class="miniPlayers">
          <span class="miniChip" id="miniName">Jugador</span>
        </div>
        <div class="miniNote tiny muted" id="miniNote">Ronda 1: dibuja con líneas simples.</div>
      </div>
    </section>

    <!-- TRANSICIÓN -->
    <section id="screenLoading" class="screen">
      <div class="loader card">
        <div class="spinner" aria-hidden="true"></div>
        <h2 id="loadingTitle">Guardando ronda…</h2>
        <p class="muted" id="loadingSub">Un momento :)</p>
      </div>
    </section>

    <!-- FINAL -->
    <section id="screenFinal" class="screen">
      <div class="card finalCard">
        <div class="finalHeader">
          <div>
            <h2 id="finalTitle">Final</h2>
            <p class="muted" id="finalDesc">Tus 3 dibujos:</p>
          </div>
          <div class="actions">
            <button id="btnPlayAgain" class="ghost" type="button">Jugar otra vez</button>
            <a id="btnDownloadStory" class="primary" href="#" download="historia.png">Descargar historia</a>
          </div>
        </div>

        <div class="banner">
          <div class="bannerInner">
            <div class="bannerBig">FINAL</div>
            <div class="bannerSmall muted">Aquí se verán tus 3 dibujos</div>
          </div>
        </div>

        <div class="storyGrid" id="storyGrid"></div>

        <div class="divider"></div>
        <h2 class="bigAsk" id="finalText">¿Quieres ser mi San Valentín?</h2>
        <p class="tiny muted">Tip: puedes descargar la historia como una sola imagen.</p>
      </div>
    </section>

  </main>

  <script src="app.js"></script>
</body>
</html>
